-# Locals:
-#   collection1:
-#   collection:
-#   association_attribute1:
-#   key1:
-#   key2:
-#   description1:
-#   description2:

%table.grid
  %colgroup
    %col
  %colgroup
    - collection2.size.times do
      %col
  %thead
    %tr
      %th.empty
      - collection2.each do |obj2|
        %th
          = link_to obj2.public_send(key2),
                    { :controller => obj2.controller_path,
                      :action     => :show,
                      :id         => obj2 },
                    :title => obj2.public_send(description2),
                    :class => 'display resource'
  %tbody
    - collection1.each do |obj1|
      %tr
        %th{:scope => "row"}
          = link_to obj1.public_send(key1),
                    { :controller => obj1.controller_path,
                      :action     => :show,
                      :id         => obj1 },
                    :title => obj1.public_send(description1),
                    :class => 'display resource'
        - collection2.each do |obj2|
          %td.boolean
            = boolean_to_picto(                                          |
                obj1.public_send(association_attribute1).include?(obj2), |
                size=2)                                                  |
