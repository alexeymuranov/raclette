<%= field_set_tag t('admin.users.edit.subheaders.user_data') do %>
  <dl class="form_fields">
    <% [ :username, :full_name ].each do |attribute| %>

      <%= render 'shared/attribute_in_form',
                 :form_builder => f,
                 :attribute    => attribute,
                 :column_type  => @column_types[attribute] %>

    <% end %>

    <%= render 'shared/attribute_in_form',
               :form_builder       => f,
               :attribute          => :email,
               :column_type        => @column_types[:email],
               :input_html_options => { :type => :email } %>

    <% is_current_user = (@user == current_user) %>

    <% [ :account_deactivated, :admin ].each do |attribute| %>

      <%= render 'shared/attribute_in_form',
                 :form_builder       => f,
                 :attribute          => attribute,
                 :column_type        => @column_types[attribute],
                 :input_html_options => { :disabled => is_current_user } %>

    <% end %>

    <% [ :manager, :secretary, :a_person ].each do |attribute| %>

      <%= render 'shared/attribute_in_form',
                 :form_builder => f,
                 :attribute    => attribute,
                 :column_type  => @column_types[attribute] %>

    <% end %>
 </dl>
<% end %>

<%= field_set_tag t('admin.users.edit.subheaders.authorized_ips') do %>

  <%= render 'shared/selection_form',
             :attributes        => @known_ips_attributes,
             :column_types      => @known_ips_column_types,
             :column_headers    => @known_ips_column_headers,
             :html_table_id     => :known_ips,
             :selected_models   => @safe_ips,
             :unselected_models => @other_ips,
             :id_prefix         => 'admin_user_safe_ip_ids',
             :array_name        => 'admin_user[safe_ip_ids]' %>

<% end %>

<%= field_set_tag t('admin.users.edit.subheaders.comments') do %>
  <dl class="form_fields">

    <%= render 'shared/attribute_in_form',
               :form_builder       => f,
               :attribute          => :comments,
               :column_type        => @column_types[:comments],
               :input_html_options => { :maxlength => 1000 } %>

  </dl>
<% end %>
