<table class="grid">
  <colgroup><col /</colgroup>
  <colgroup><% @known_ips.size.times do %><col /><% end %></colgroup>
  <thead>
    <tr>
      <th class='empty'></th>
      <% @known_ips.each do |known_ip| %>
        <% note = known_ip.description.blank? ? '' : " (#{known_ip.description})" %>
        <th>
          <%= link_to "#{known_ip.ip}#{note}", known_ip,
                      :title => t('actions.read'),
                      :class => 'display' %>
        </th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <th scope=row>
          <%= link_to user.username, user,
                      :title => t('actions.read'),
                      :class => 'display' %>
        </th>
        <% @known_ips.each do |known_ip| %>
          <td class='boolean'>
            <%= boolean_to_picto(user.safe_ips.include?(known_ip)) %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
