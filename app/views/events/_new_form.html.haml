= form_for @event, :as => :event, :url => events_path,
                   :html => { :id => 'form' } do |f|

  = render 'shared/error_messages/validation', :target => @event

  %dl.form_fields

    -# = render 'shared/forms/belongs_to_association',
    -#          :form_builder => f,
    -#          :association  => :weekly_event,
    -#          :association_name_attribute => :virtual_long_title,
    -#          :collection   => @weekly_events

    .item.field
      %dt
        = t 'formats.attribute_name:',
            :attribute => Event.human_attribute_name(:weekly_event)
      %dd{ :class => 'input' }
        = f.select_for_belongs_to :weekly_event, :virtual_long_title,
                                  @weekly_events,
                                  :include_blank => true
        %span.actions
          = button_tag t('.select_button'),
                       :name       => 'button',
                       :value      => 'select_weekly_event',
                       :type       => 'submit',
                       :form       => 'form',
                       :formaction => url_for(:action => :new),
                       :formmethod => 'get',
                       :class      => 'prefill'

    = render 'shared/forms/belongs_to_association',
             :form_builder => f,
             :association  => :lesson_supervision,
             :association_name_attribute => :unique_names

    - @attributes.each do |attribute|

      = render 'shared/forms/attribute',
               :form_builder => f,
               :attribute    => attribute

  .actions
    = f.submit
