= form_for @event, :as => :event, :url => events_path,
                   :html => { :id => 'form' } do |f|

  = render 'shared/error_messages/validation', :target => @event

  %fieldset
    %dl.form_fields
      .dl_item.field
        %dt
          = t '.select_label'
        %dd{ :class => 'input' }
          = f.select_for_belongs_to :weekly_event,
                                    @weekly_events, :non_sql_long_title,
                                    :include_blank => true
          %span.actions
            = button_tag t('.select_button'),
                         :name       => 'button',
                         :value      => 'select_weekly_event',
                         :type       => 'submit',
                         :form       => 'form',
                         :formaction => url_for(:action => :new),
                         :formmethod => 'get',
                         :class      => 'prefill'

      - @attributes.each do |attribute|

        = render 'shared/forms/attribute',
                 :form_builder => f,
                 :attribute    => attribute,
                 :column_type  => @column_types[attribute]

  .actions
    = f.submit
